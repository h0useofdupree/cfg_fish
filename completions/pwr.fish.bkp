# --- Helper functions for conditions ---

function __fish_pwr_needs_option
    set -l cmd (commandline -opc)
    if [ (count $cmd) -eq 1 ]
        return 0
    end
    return 1
end

function __fish_pwr_using_backend_subcommand
    set -l cmd (commandline -opc)
    if test (count $cmd) -gt 1; and test "$cmd[2]" = "backend"
        return 0
    end
    return 1
end

# --- pwr main command and options ---

complete -c pwr -n '__fish_pwr_needs_option' -s h -l help -d "â“˜ Help" -f
complete -c pwr -n '__fish_pwr_needs_option' -s a -l alpha -d "ğŸ”¢ Alpha Level" -f
complete -c pwr -s w -l wallpaper -d "ğŸ–¼ Wallpaper Path" -F
complete -c pwr -n '__fish_pwr_needs_option' -a "backend" -d "ğŸ¨ Choose Backend" -f

# --- Backend-specific completions ---

complete -c pwr -n '__fish_pwr_using_backend_subcommand' -a "wal" -d "ğŸŒ€ wal" -f
complete -c pwr -n '__fish_pwr_using_backend_subcommand' -a "colorz" -d "ğŸŒˆ colorz" -f
complete -c pwr -n '__fish_pwr_using_backend_subcommand' -a "colorthief" -d "ğŸ” colorthief" -f
complete -c pwr -n '__fish_pwr_using_backend_subcommand' -a "haishoku" -d "ğŸŒ¸ haishoku" -f
complete -c pwr -n '__fish_pwr_using_backend_subcommand' -a "schemer2" -d "ğŸ¨ schemer2" -f

